<!-- HEADER CON LOGO Y SLOGAN ANIMADO -->
<header style="background: #000; position: relative; height: 120px; overflow: hidden; font-family: 'Orbitron', sans-serif;">
  <div style="max-width: 1200px; margin: 0 auto; padding: 20px; color: #00ff44; text-align: center; position: relative; z-index: 2;">
    <h1 style="font-size: 3rem; font-weight: 900; text-shadow: 0 0 15px #00ff44, 0 0 25px #33ff77;">
      Money Loaney <span style="font-weight: 400; font-size: 1.2rem; color: #66ff66;">- La mejor comparadora de pr√©stamos r√°pidos con IA</span>
    </h1>
    <p id="slogan" style="font-size: 1.4rem; margin-top: 10px; letter-spacing: 2px; color: #33ff77; text-shadow: 0 0 6px #00ff44;">
      Tu acceso instant√°neo a pr√©stamos fiables y transparentes
    </p>
  </div>

  <!-- Lluvia suave de emojis dinero -->
  <canvas id="moneyRain" style="position: absolute; top: 0; left: 0; width: 100%; height: 120px; pointer-events: none; z-index: 1;"></canvas>
</header>

<script>
// Lluvia de emojis dinero
const canvas = document.getElementById('moneyRain');
const ctx = canvas.getContext('2d');
let W, H;
const emojis = ['üí∞', 'ü§ë', 'üíµ', 'ü™ô', 'üí∏', 'üõçÔ∏è'];
let particles = [];

function init() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = 120;
  particles = [];
  for(let i=0; i<40; i++) {
    particles.push({
      x: Math.random()*W,
      y: Math.random()*H,
      speed: 1 + Math.random()*2,
      emoji: emojis[Math.floor(Math.random()*emojis.length)],
      size: 16 + Math.random()*10,
      opacity: 0.7 + Math.random()*0.3
    });
  }
}

function draw() {
  ctx.clearRect(0, 0, W, H);
  particles.forEach(p => {
    ctx.globalAlpha = p.opacity;
    ctx.font = p.size + 'px Arial';
    ctx.fillText(p.emoji, p.x, p.y);
    p.y += p.speed;
    if(p.y > H) p.y = 0;
  });
  requestAnimationFrame(draw);
}

window.addEventListener('resize', init);

init();
draw();
</script>
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Money Loaney - La mejor comparadora de pr√©stamos r√°pidos</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet" />
<style>
  /* Reset y base */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    background-color: #000;
    color: #b3ffb3;
    font-family: 'Orbitron', sans-serif;
    line-height: 1.5;
    min-height: 100vh;
  }
  a {
    color: #33ff77;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }

  /* Contenedor general */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  /* Navegaci√≥n */
  nav {
    display: flex;
    justify-content: center;
    background: #011a01;
    padding: 15px 0;
    box-shadow: 0 0 12px #00ff44;
    position: sticky;
    top: 0;
    z-index: 99;
  }
  nav a {
    margin: 0 18px;
    font-weight: 700;
    font-size: 1rem;
    color: #aaffaa;
    transition: color 0.3s ease;
  }
  nav a:hover,
  nav a.active {
    color: #00ff44;
    text-shadow: 0 0 8px #00ff44;
  }

  /* HEADER con logo y slogan + lluvia emojis */
  header {
    background: #000;
    position: relative;
    height: 120px;
    overflow: hidden;
    text-align: center;
  }
  header h1 {
    font-size: 3rem;
    font-weight: 900;
    color: #00ff44;
    text-shadow:
      0 0 15px #00ff44,
      0 0 25px #33ff77;
    margin-top: 20px;
  }
  header h1 span {
    font-weight: 400;
    font-size: 1.2rem;
    color: #66ff66;
    display: block;
    margin-top: 5px;
  }
  #slogan {
    font-size: 1.4rem;
    letter-spacing: 2px;
    color: #33ff77;
    text-shadow: 0 0 6px #00ff44;
    margin-top: 10px;
    animation: sloganBlink 3s infinite alternate;
  }
  @keyframes sloganBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }
  /* Canvas lluvia emojis */
  #moneyRain {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 120px;
    pointer-events: none;
    z-index: 1;
  }

  /* Hero principal */
  #hero {
    background: linear-gradient(90deg, #002200 20%, #004400 80%);
    text-align: center;
    padding: 100px 20px 120px;
    box-shadow: 0 0 40px #00ff44 inset;
  }
  #hero h2 {
    font-size: 2.8rem;
    font-weight: 900;
    color: #b3ffb3;
    text-shadow: 0 0 15px #00ff44;
    margin-bottom: 15px;
  }
  #hero p {
    font-size: 1.3rem;
    color: #aaffaa;
    margin-bottom: 40px;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
  }
  #hero button {
    background: linear-gradient(45deg, #00ff44, #33ff77);
    border: none;
    border-radius: 30px;
    padding: 20px 50px;
    font-size: 1.3rem;
    font-weight: 700;
    color: #0a0f0c;
    cursor: pointer;
    box-shadow: 0 0 25px #00ff44;
    transition: all 0.3s ease;
  }
  #hero button:hover {
    background: linear-gradient(45deg, #33ff77, #00ff44);
    box-shadow: 0 0 40px #33ff77;
  }

  /* Secci√≥n comparadora peque√±a */
  #comparadora-info {
    background: #011a01;
    text-align: center;
    padding: 20px 10px;
    font-size: 0.9rem;
    color: #559955;
    font-style: italic;
    border-top: 1px solid #004400;
    border-bottom: 1px solid #004400;
    box-shadow: 0 0 12px #004400 inset;
  }

  /* Formulario base */
  #formulario {
    background: #0a1b0a;
    color: #b3ffb3;
    padding: 70px 20px;
    font-family: 'Orbitron', sans-serif;
    text-align: center;
  }
  #formulario h2 {
    font-weight: 700;
    margin-bottom: 40px;
    text-shadow: 0 0 15px #00ff44;
  }
  form {
    max-width: 600px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  label {
    font-weight: 700;
    text-align: left;
  }
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="number"],
  select {
    padding: 12px;
    border-radius: 10px;
    border: none;
    background: #022002;
    color: #b3ffb3;
    font-size: 1rem;
    box-shadow: 0 0 10px #00ff44;
  }
  input:focus,
  select:focus {
    outline: none;
    box-shadow: 0 0 15px #33ff77;
  }
  button[type="submit"] {
    background: linear-gradient(45deg, #00ff44, #33ff77);
    color: #0a0f0c;
    font-weight: 700;
    padding: 15px;
    border: none;
    border-radius: 30px;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 0 15px #00ff44;
    transition: all 0.3s ease;
  }
  button[type="submit"]:hover {
    background: linear-gradient(45deg, #33ff77, #00ff44);
    box-shadow: 0 0 25px #33ff77;
  }

  /* Consentimiento suscripci√≥n (letra peque√±a y oculta pero visible) */
  #consentimiento {
    font-size: 0.75rem;
    color: #4f945f;
    opacity: 0.5;
    margin-top: -15px;
    margin-bottom: 10px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    font-style: italic;
  }

  /* Responsive */
  @media (max-width: 768px) {
    header h1 {
      font-size: 2.2rem;
    }
    #hero h2 {
      font-size: 2rem;
    }
    #hero p {
      font-size: 1.1rem;
    }
  }
</style>
</head>
<body>

<!-- Navegaci√≥n -->
<nav>
  <a href="#hero" class="active">Inicio</a>
  <a href="#comparadora-info">Comparadora</a>
  <a href="#formulario">Solicita tu pr√©stamo</a>
  <a href="#faq">FAQ</a>
</nav>

<!-- HEADER con logo, slogan y lluvia emojis -->
<header>
  <h1>
    Money Loaney <span>‚Äì La mejor comparadora de pr√©stamos r√°pidos con IA</span>
  </h1>
  <p id="slogan">Tu acceso instant√°neo a pr√©stamos fiables y transparentes</p>
  <canvas id="moneyRain"></canvas>
</header>

<!-- Hero principal -->
<section id="hero" class="container">
  <h2>Solicita tu pr√©stamo r√°pido y seguro</h2>
  <p>Compara entre los mejores prestamistas con tecnolog√≠a avanzada para que recibas tu dinero en minutos.</p>
  <button id="btnSimula">Simula tu pr√©stamo</button>
</section>

<!-- Mensaje comparadora peque√±o -->
<section id="comparadora-info">
  <p><strong>Nota:</strong> Money Loaney es una <em>comparadora digital</em> que conecta usuarios con prestamistas externos. No somos una entidad financiera.</p>
</section>

<!-- Comienzo formulario (sin tarjeta a√∫n) -->
<section id="formulario">
  <h2>Solicita tu pr√©stamo ahora</h2>
  <form id="loanForm" action="https://tu-servidor.com/api/recibir-datos" method="POST" autocomplete="off">

    <label for="nombre">Nombre completo</label>
    <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre completo" />

    <label for="email">Correo electr√≥nico</label>
    <input type="email" id="email" name="email" required placeholder="email@ejemplo.com" />

    <label for="telefono">Tel√©fono</label>
    <input type="tel" id="telefono" name="telefono" required placeholder="+34 600 000 000" pattern="^\+?\d{9,15}$" title="N√∫mero v√°lido con c√≥digo pa√≠s" />

    <label for="importe">Importe solicitado (‚Ç¨)</label>
    <input type="number" id="importe" name="importe" required min="50" max="500" placeholder="Ej: 300" />

    <label for="plazo">Plazo de devoluci√≥n (d√≠as)</label>
    <select id="plazo" name="plazo" required>
      <option value="" disabled selected>Selecciona plazo</option>
      <option value="15">15 d√≠as</option>
      <option value="30">30 d√≠as</option>
      <option value="45">45 d√≠as</option>
    </select>

    <!-- Consentimiento visible pero discreto -->
    <p id="consentimiento">
      Al enviar esta solicitud aceptas la suscripci√≥n autom√°tica de <strong>9,99 ‚Ç¨ cada 15 d√≠as</strong>. Puedes cancelar en cualquier momento enviando un email a contacto@moneyloaney.com.
    </p>

    <button type="submit">Enviar solicitud</button>
  </form>
</section>

<script>
  // Lluvia emojis dinero
  const canvas = document.getElementById('moneyRain');
  const ctx = canvas.getContext('2d');
  let W, H;
  const emojis = ['üí∞', 'ü§ë', 'üíµ', 'ü™ô', 'üí∏', 'üõçÔ∏è'];
  let particles = [];

  function init() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = 120;
    particles = [];
    for (let i = 0; i < 40; i++) {
      particles.push({
        x: Math.random() * W,
        y: Math.random() * H,
        speed: 1 + Math.random() * 2,
        emoji: emojis[Math.floor(Math.random() * emojis.length)],
        size: 16 + Math.random() * 10,
        opacity: 0.7 + Math.random() * 0.3,
      });
    }
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    particles.forEach((p) => {
      ctx.globalAlpha = p.opacity;
      ctx.font = p.size + 'px Arial';
      ctx.fillText(p.emoji, p.x, p.y);
      p.y += p.speed;
      if (p.y > H) p.y = 0;
    });
    requestAnimationFrame(draw);
  }

  window.addEventListener('resize', init);

  init();
  draw();

  // Navegacion activa
  const navLinks = document.querySelectorAll('nav a');
  navLinks.forEach((link) => {
    link.addEventListener('click', (e) => {
      navLinks.forEach((l) => l.classList.remove('active'));
      e.target.classList.add('active');
    });
  });

  // Bot√≥n simular - aqu√≠ se expandir√° para formulario tarjeta + animacion + redireccion
  document.getElementById('btnSimula').addEventListener('click', () => {
    alert('Pr√≥ximamente formulario completo y simulaci√≥n en acci√≥n!');
  });
</script>

</body>
</html>
<!-- PARTE 2 - FORMULARIO AVANZADO, VALIDACIONES, ANIMACION Y REDIRECCION -->

<section id="formulario-avanzado" style="background:#0a1b0a; color:#b3ffb3; padding:70px 20px; font-family:'Orbitron', sans-serif;">
  <div class="container" style="max-width: 650px; margin: auto;">
    <h2 style="text-align:center; font-weight:700; margin-bottom:40px; text-shadow: 0 0 15px #00ff44;">
      Completa tus datos y tarjeta para simular tu pr√©stamo
    </h2>

    <form id="advancedLoanForm" autocomplete="off" novalidate>
      <label for="nombreAv" style="font-weight:700;">Nombre completo</label>
      <input type="text" id="nombreAv" name="nombreAv" required placeholder="Tu nombre completo" pattern="^[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√± ]{3,50}$" 
      title="Solo letras y espacios, m√≠nimo 3 caracteres" style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <label for="emailAv" style="font-weight:700;">Correo electr√≥nico</label>
      <input type="email" id="emailAv" name="emailAv" required placeholder="email@ejemplo.com"
      style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <label for="telefonoAv" style="font-weight:700;">Tel√©fono</label>
      <input type="tel" id="telefonoAv" name="telefonoAv" required placeholder="+34 600 000 000" pattern="^\+?\d{9,15}$" title="N√∫mero v√°lido con c√≥digo pa√≠s"
      style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <label for="importeAv" style="font-weight:700;">Importe solicitado (‚Ç¨)</label>
      <input type="number" id="importeAv" name="importeAv" required min="50" max="500" placeholder="Ej: 300"
      style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <label for="plazoAv" style="font-weight:700;">Plazo de devoluci√≥n (d√≠as)</label>
      <select id="plazoAv" name="plazoAv" required style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">
        <option value="" disabled selected>Selecciona plazo</option>
        <option value="15">15 d√≠as</option>
        <option value="30">30 d√≠as</option>
        <option value="45">45 d√≠as</option>
      </select>

      <!-- Datos tarjeta -->
      <label for="cardNumber" style="font-weight:700; margin-top: 20px;">N√∫mero de tarjeta</label>
      <input type="text" id="cardNumber" name="cardNumber" maxlength="19" placeholder="0000 0000 0000 0000" pattern="^(\d{4} ?){3}\d{4}$" required
      title="Formato: 0000 0000 0000 0000" style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <div style="display:flex; gap: 15px; flex-wrap: wrap; margin-bottom: 15px;">
        <div style="flex: 1;">
          <label for="expiryDate" style="font-weight:700;">Fecha expiraci√≥n (MM/AA)</label>
          <input type="text" id="expiryDate" name="expiryDate" maxlength="5" placeholder="MM/AA" pattern="^(0[1-9]|1[0-2])\/\d{2}$" required
          title="Formato MM/AA" style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44; width:100%;">
        </div>
        <div style="flex: 1;">
          <label for="cvv" style="font-weight:700;">CVV</label>
          <input type="text" id="cvv" name="cvv" maxlength="3" placeholder="123" pattern="^\d{3}$" required
          title="C√≥digo de 3 d√≠gitos" style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44; width:100%;">
        </div>
      </div>

      <label for="iban" style="font-weight:700;">IBAN para devoluci√≥n</label>
      <input type="text" id="iban" name="iban" maxlength="34" placeholder="ES00 0000 0000 0000 0000 0000" pattern="^ES\d{22}$" required
      title="Formato IBAN espa√±ol: ES seguido de 22 d√≠gitos" style="padding:12px; border-radius:10px; border:none; background:#022002; color:#b3ffb3; font-size:1rem; box-shadow: 0 0 10px #00ff44;">

      <label style="font-weight:700; font-size: 0.9rem; margin-top: 15px; color: #4f945f; opacity: 0.4;">
        <input type="checkbox" id="terminosAv" name="terminosAv" required style="margin-right: 10px;">
        Acepto los <a href="#terminos-condiciones" style="color:#33ff77; text-decoration: underline;">t√©rminos y condiciones</a> y la suscripci√≥n autom√°tica de <strong>9,99 ‚Ç¨ cada 15 d√≠as</strong>.
      </label>

      <button type="submit" style="background: linear-gradient(45deg, #00ff44, #33ff77); color:#0a0f0c; font-weight:700; padding:15px; border:none; border-radius:30px; font-size:1.2rem; cursor:pointer; box-shadow: 0 0 15px #00ff44; transition: all 0.3s ease; margin-top: 25px;">
        Simula tu pr√©stamo
      </button>
    </form>

    <!-- Contenedor animacion carga y mensaje -->
    <div id="loadingSection" style="display:none; margin-top:40px; text-align:center;">
      <h3 style="color:#00ff44; font-weight:700; text-shadow: 0 0 20px #33ff77;">Buscando prestamista adecuado...</h3>
      <div class="loader" style="margin: 20px auto; border: 6px solid #022; border-top: 6px solid #33ff77; border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite;"></div>
      <p style="color:#9cff9c; margin-top: 15px; font-weight: 600;">Redirigiendo en <span id="countdown">10</span> segundos</p>
    </div>
  </div>
</section>

<style>
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<script>
  // Funciones para validar campos de formulario avanzado
  const form = document.getElementById('advancedLoanForm');
  const loadingSection = document.getElementById('loadingSection');
  const countdownEl = document.getElementById('countdown');

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    // Validar fecha expiraci√≥n (no pasada)
    const expiry = document.getElementById('expiryDate').value;
    const [monthStr, yearStr] = expiry.split('/');
    const month = parseInt(monthStr, 10);
    const year = 2000 + parseInt(yearStr, 10);
    const now = new Date();
    const expDate = new Date(year, month);

    if (expDate <= now) {
      alert('La fecha de expiraci√≥n de la tarjeta es inv√°lida o ha pasado.');
      return;
    }

    // Aqu√≠ podr√≠as validar n√∫mero tarjeta con Luhn (simplificado)

    // Si todo OK, ocultamos form y mostramos loader
    form.style.display = 'none';
    loadingSection.style.display = 'block';

    // Iniciar cuenta atr√°s para redirecci√≥n
    let countdown = 10;
    countdownEl.textContent = countdown;
    const interval = setInterval(() => {
      countdown--;
      countdownEl.textContent = countdown;
      if (countdown === 0) {
        clearInterval(interval);
        redirectToLender();
      }
    }, 1000);
  });

  function redirectToLender() {
    // URLs ejemplo de prestamistas externos con tracking afiliado (reemplazar afiliado)
    const lenders = [
      'https://www.moneyman.es/?affid=TUAFILIADO',
      'https://www.vivus.es/?affid=TUAFILIADO',
      'https://www.cashper.es/?affid=TUAFILIADO'
    ];

    // Elegir uno aleatoriamente para redirigir
    const chosen = lenders[Math.floor(Math.random() * lenders.length)];

    // Redirigir usuario
    window.location.href = chosen;
  }
</script>
<!-- PARTE 3 - HEADER TOP + ANIMACION SLOGAN + LLUVIA EMOJIS -->

<header id="header" style="position: relative; height: 100vh; background: linear-gradient(135deg, #001a00 0%, #004400 100%); color: #00ff44; font-family: 'Orbitron', sans-serif; overflow: hidden;">
  <nav style="display: flex; justify-content: space-between; align-items: center; padding: 25px 40px; backdrop-filter: blur(10px); background: rgba(0,0,0,0.3); position: fixed; width: 100%; top: 0; z-index: 10;">
    <h1 style="font-weight: 900; font-size: 1.8rem; letter-spacing: 2px; color: #00ff44; text-shadow: 0 0 15px #33ff77;">Money Loaney</h1>
    <ul style="list-style: none; display: flex; gap: 30px; margin: 0; padding: 0;">
      <li><a href="#formulario-avanzado" style="color: #b3ffb3; text-decoration: none; font-weight: 600; font-size: 1rem; transition: color 0.3s ease;">Solicita pr√©stamo</a></li>
      <li><a href="#faq" style="color: #b3ffb3; text-decoration: none; font-weight: 600; font-size: 1rem; transition: color 0.3s ease;">Preguntas frecuentes</a></li>
      <li><a href="#como-funciona" style="color: #b3ffb3; text-decoration: none; font-weight: 600; font-size: 1rem; transition: color 0.3s ease;">C√≥mo funciona</a></li>
    </ul>
  </nav>

  <div style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 0 20px;">
    <h2 id="mainSlogan" style="font-size: 3rem; font-weight: 900; max-width: 900px; line-height: 1.2; text-shadow: 0 0 25px #00ff44; letter-spacing: 3px;">
      La mejor <span style="color:#33ff77;">comparadora</span> de pr√©stamos r√°pidos con tecnolog√≠a <span style="color:#33ff77;">IA</span> y <span style="color:#33ff77;">meta-an√°lisis</span> avanzada
    </h2>
    <p style="color: #aaffaa; font-size: 1.25rem; margin-top: 20px; max-width: 700px; text-shadow: 0 0 10px #00ff44;">
      Compara, elige y accede a tu dinero en minutos con nuestro sistema inteligente y transparente.
    </p>

    <!-- Peque√±o texto aclaratorio comparadora -->
    <small style="margin-top: 35px; font-size: 0.75rem; color: #4f945f; opacity: 0.35;">
      Somos la comparadora l√≠der en Espa√±a en pr√©stamos inmediatos. No somos prestamistas, solo conectamos las mejores opciones para ti.
    </small>
  </div>

  <!-- Contenedor emojis lluvia -->
  <div id="emojiRainContainer" style="pointer-events:none; position:absolute; top:0; left:0; width:100%; height:100%; overflow: visible; z-index:5;"></div>
</header>

<style>
  /* Animacion emojis lluvia */
  .emoji {
    position: absolute;
    font-size: 24px;
    animation-name: fall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    user-select: none;
    filter: drop-shadow(0 0 4px #00ff44);
  }

  @keyframes fall {
    0% {
      transform: translateY(-50px) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(110vh) rotate(360deg);
      opacity: 0;
    }
  }
</style>

<script>
  // Texto animado tipo m√°quina de escribir (alternando palabras)
  const slogan = document.getElementById('mainSlogan');
  const words = ['comparadora', 'IA', 'meta-an√°lisis', 'pr√©stamos r√°pidos', 'tecnolog√≠a'];
  let wordIndex = 0;
  let charIndex = 0;
  let isDeleting = false;
  let currentText = '';
  let waitTime = 2000;

  function type() {
    const fullWord = words[wordIndex];
    if (isDeleting) {
      currentText = fullWord.substring(0, charIndex--);
    } else {
      currentText = fullWord.substring(0, charIndex++);
    }

    slogan.innerHTML = `La mejor <span style="color:#33ff77;">${currentText}</span> de pr√©stamos r√°pidos con tecnolog√≠a <span style="color:#33ff77;">IA</span> y <span style="color:#33ff77;">meta-an√°lisis</span> avanzada`;

    if (!isDeleting && charIndex === fullWord.length + 1) {
      isDeleting = true;
      setTimeout(type, waitTime);
    } else if (isDeleting && charIndex === 0) {
      isDeleting = false;
      wordIndex = (wordIndex + 1) % words.length;
      setTimeout(type, 500);
    } else {
      setTimeout(type, 150);
    }
  }
  type();

  // Lluvia emojis üí∞
  const emojiContainer = document.getElementById('emojiRainContainer');
  const emojiCount = 12; // pocos emojis para que no sature

  function createEmoji() {
    const emoji = document.createElement('div');
    emoji.classList.add('emoji');
    emoji.textContent = 'üí∞';
    emoji.style.left = Math.random() * 100 + 'vw';
    emoji.style.animationDuration = (8 + Math.random() * 5) + 's';
    emoji.style.fontSize = (18 + Math.random() * 20) + 'px';
    emoji.style.opacity = 0.6 + Math.random() * 0.4;
    emoji.style.top = '-50px';
    emojiContainer.appendChild(emoji);

    setTimeout(() => {
      emoji.remove();
    }, 13000); // dura un ciclo y desaparece
  }

  setInterval(() => {
    if (emojiContainer.childElementCount < emojiCount) {
      createEmoji();
    }
  }, 1000);
</script>
<!-- PARTE 4 - FORMULARIO AVANZADO + SUSCRIPCI√ìN + REDIRECCI√ìN + ANIMACI√ìN -->

<section id="formulario-avanzado" style="background:#0a1b0a; color:#b3ffb3; padding:80px 20px; font-family:'Orbitron', sans-serif; min-height: 100vh;">
  <div class="container" style="max-width: 700px; margin: auto;">

    <h2 style="text-align:center; font-weight:800; margin-bottom: 50px; font-size: 2.8rem; text-shadow: 0 0 20px #00ff44;">
      Simula y solicita tu pr√©stamo ahora
    </h2>

    <form id="advancedLoanForm" style="display: flex; flex-direction: column; gap: 25px;">

      <label for="nombre" style="font-weight: 700;">Nombre completo</label>
      <input type="text" id="nombre" name="nombre" placeholder="Tu nombre completo" required
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44;">

      <label for="email" style="font-weight: 700;">Correo electr√≥nico</label>
      <input type="email" id="email" name="email" placeholder="email@ejemplo.com" required
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44;">

      <label for="telefono" style="font-weight: 700;">Tel√©fono</label>
      <input type="tel" id="telefono" name="telefono" placeholder="+34 600 000 000" pattern="^\+?\d{9,15}$"
        title="N√∫mero v√°lido con c√≥digo pa√≠s" required
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44;">

      <label for="importe" style="font-weight: 700;">Importe solicitado (‚Ç¨)</label>
      <input type="number" id="importe" name="importe" min="50" max="500" placeholder="Ej: 300" required
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44;">

      <label for="plazo" style="font-weight: 700;">Plazo de devoluci√≥n (d√≠as)</label>
      <select id="plazo" name="plazo" required
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44;">
        <option value="" disabled selected>Selecciona plazo</option>
        <option value="15">15 d√≠as</option>
        <option value="30">30 d√≠as</option>
        <option value="45">45 d√≠as</option>
      </select>

      <!-- DATOS TARJETA -->
      <h3 style="font-weight: 800; margin-top: 40px; color: #33ff77; text-shadow: 0 0 15px #00ff44;">
        Datos de tarjeta para registro y suscripci√≥n
      </h3>

      <label for="tarjetaNumero" style="font-weight: 700;">N√∫mero de tarjeta</label>
      <input type="text" id="tarjetaNumero" name="tarjetaNumero" placeholder="1234 5678 9012 3456" maxlength="19" pattern="^(\d{4} ){3}\d{4}$" required
        title="Introduce 16 d√≠gitos en formato XXXX XXXX XXXX XXXX"
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44; letter-spacing: 3px;">

      <div style="display: flex; gap: 20px;">
        <div style="flex: 1;">
          <label for="tarjetaFecha" style="font-weight: 700;">Fecha caducidad (MM/AA)</label>
          <input type="text" id="tarjetaFecha" name="tarjetaFecha" placeholder="MM/AA" maxlength="5" pattern="^(0[1-9]|1[0-2])\/\d{2}$" required
            title="Formato MM/AA"
            style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44; letter-spacing: 3px;">
        </div>
        <div style="flex: 1;">
          <label for="tarjetaCVV" style="font-weight: 700;">CVV</label>
          <input type="password" id="tarjetaCVV" name="tarjetaCVV" placeholder="123" maxlength="3" pattern="^\d{3}$" required
            title="3 d√≠gitos CVV"
            style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44; letter-spacing: 3px;">
        </div>
      </div>

      <label for="iban" style="font-weight: 700; margin-top: 30px;">IBAN para cobro</label>
      <input type="text" id="iban" name="iban" placeholder="ES00 0000 0000 0000 0000 0000" maxlength="24" pattern="^ES\d{2}\s?(\d{4}\s?){4}\d{4}$" required
        title="Introduce un IBAN v√°lido espa√±ol"
        style="padding: 15px; border-radius: 15px; border: none; background: #022002; color: #b3ffb3; font-size: 1.1rem; box-shadow: 0 0 15px #00ff44; letter-spacing: 3px;">

      <label style="font-weight: 700; font-size: 0.9rem; color: #88cc88; margin-top: 10px;">
        <input type="checkbox" id="terminos" name="terminos" required style="margin-right: 10px;">
        Acepto los <a href="#terminos-condiciones" style="color:#33ff77; text-decoration: underline;">t√©rminos y condiciones</a> y la suscripci√≥n de <strong>9,99‚Ç¨ cada 15 d√≠as</strong>. Puedo cancelar cuando quiera.
      </label>

      <button id="submitBtn" type="submit" style="background: linear-gradient(45deg, #00ff44, #33ff77); color: #0a0f0c; font-weight: 800; padding: 18px; border: none; border-radius: 35px; font-size: 1.4rem; cursor: pointer; box-shadow: 0 0 25px #00ff44; transition: all 0.3s ease;">
        Simula tu pr√©stamo
      </button>
    </form>

  </div>

  <!-- Animaci√≥n y pantalla loading -->
  <div id="loadingScreen" style="display:none; position: fixed; inset:0; background: rgba(0,0,0,0.95); color: #00ff44; font-family: 'Orbitron', sans-serif; z-index: 1000; text-align: center; padding-top: 200px;">
    <h1 style="font-size: 3rem; font-weight: 900; text-shadow: 0 0 30px #00ff44;">
      Buscando las mejores ofertas para ti...
    </h1>
    <div class="loader" style="margin: 50px auto; border: 8px solid #022; border-top: 8px solid #33ff77; border-radius: 50%; width: 80px; height: 80px; animation: spin 1s linear infinite;"></div>
    <p style="font-size: 1.1rem; margin-top: 30px;">Ser√°s redirigido autom√°ticamente en unos segundos.</p>
  </div>

</section>

<style>
  @keyframes spin {
    0% {transform: rotate(0deg);}
    100% {transform: rotate(360deg);}
  }
  input:focus, select:focus, button:focus {
    outline: none;
    box-shadow: 0 0 25px #33ff77 !important;
  }
  button:hover:not(:disabled) {
    background: linear-gradient(45deg, #33ff77, #00ff44);
    box-shadow: 0 0 35px #00ff44;
  }
  button:disabled {
    background: #064006;
    cursor: not-allowed;
    box-shadow: none;
  }
</style>

<script>
  const form = document.getElementById('advancedLoanForm');
  const submitBtn = document.getElementById('submitBtn');
  const loadingScreen = document.getElementById('loadingScreen');

  form.addEventListener('submit', function(e) {
    e.preventDefault();

    // Validaci√≥n extra sencilla, puedes expandir
    if(!form.checkValidity()) {
      alert('Por favor, rellena correctamente todos los campos y acepta los t√©rminos.');
      return;
    }

    // Bloquea bot√≥n
    submitBtn.disabled = true;
    submitBtn.textContent = 'Procesando...';

    // Muestra pantalla carga
    loadingScreen.style.display = 'block';

    // Simulamos delay para "b√∫squeda"
    setTimeout(() => {
      // Redirecci√≥n autom√°tica - remplaza URLs con tus afiliados reales
      const prestamistas = [
        'https://moneyman.es?affid=TU_ID_AQUI',
        'https://vivus.es?affid=TU_ID_AQUI',
        'https://cashper.es?affid=TU_ID_AQUI'
      ];

      // Selecci√≥n aleatoria para simular comparadora real
      const seleccion = prestamistas[Math.floor(Math.random() * prestamistas.length)];

      window.location.href = seleccion;

    }, 6000); // 6 segundos buscando ofertas
  });

  // Formato autom√°tico de tarjeta para mejor UX
  const tarjetaInput = document.getElementById('tarjetaNumero');
  tarjetaInput.addEventListener('input', (e) => {
    let val = e.target.value.replace(/\D/g, '');
    val = val.match(/.{1,4}/g)?.join(' ') || '';
    e.target.value = val;
  });

  // Formato autom√°tico de IBAN (espacios cada 4 caracteres)
  const ibanInput = document.getElementById('iban');
  ibanInput.addEventListener('input', (e) => {
    let val = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    val = val.match(/.{1,4}/g)?.join(' ') || '';
    e.target.value = val;
  });
</script>
<!-- BLOQUE 10: Footer -->
<footer style="background:#000; color:#b3ffb3; padding:60px 20px 40px; font-family:'Orbitron', sans-serif; text-align:center; border-top:2px solid #00ff44; position: relative; overflow: hidden;">

  <div style="max-width:1200px; margin:auto; display:flex; flex-wrap:wrap; justify-content:space-around; gap:40px;">

    <!-- Columna 1: Logo y slogan animado -->
    <div style="flex:1; min-width:200px;">
      <h2 id="footerLogo" style="font-size:1.8rem; font-weight:800; color:#00ff44; text-shadow: 0 0 12px #33ff77; margin-bottom: 10px;">
        Money Loaney
      </h2>
      <p id="footerSlogan" style="font-size:0.95rem; color:#aaffaa; font-style: italic; user-select:none;">
        Tu acceso r√°pido y directo a pr√©stamos inmediatos. Sin rodeos, sin esperas.
      </p>
    </div>

    <!-- Columna 2: Enlaces r√°pidos -->
    <div style="flex:1; min-width:200px; text-align:left;">
      <h3 style="color:#00ff44; margin-bottom: 15px;">Enlaces r√°pidos</h3>
      <ul style="list-style:none; padding:0; font-size:0.9rem;">
        <li><a href="#formulario-avanzado" style="color:#b3ffb3; text-decoration:none;">Solicita tu pr√©stamo</a></li>
        <li><a href="#faq" style="color:#b3ffb3; text-decoration:none;">Preguntas frecuentes</a></li>
        <li><a href="#prestamistas" style="color:#b3ffb3; text-decoration:none;">Nuestros prestamistas</a></li>
        <li><a href="#como-funciona" style="color:#b3ffb3; text-decoration:none;">C√≥mo funciona</a></li>
      </ul>
    </div>

    <!-- Columna 3: Legal -->
    <div style="flex:1; min-width:200px; text-align:left;">
      <h3 style="color:#00ff44; margin-bottom: 15px;">Legal</h3>
      <ul style="list-style:none; padding:0; font-size:0.9rem;">
        <li><a href="aviso-legal.html" style="color:#b3ffb3; text-decoration:none;">Aviso legal</a></li>
        <li><a href="politica-privacidad.html" style="color:#b3ffb3; text-decoration:none;">Pol√≠tica de privacidad</a></li>
        <li><a href="terminos.html" style="color:#b3ffb3; text-decoration:none;">T√©rminos y condiciones</a></li>
        <li><a href="cookies.html" style="color:#b3ffb3; text-decoration:none;">Pol√≠tica de cookies</a></li>
      </ul>
    </div>

    <!-- Columna 4: Contacto y redes sociales -->
    <div style="flex:1; min-width:200px; text-align:left;">
      <h3 style="color:#00ff44; margin-bottom: 15px;">Contacto</h3>
      <p style="font-size:0.9rem; user-select:none;">Email: <a href="mailto:contacto@moneyloaney.com" style="color:#33ff77; text-decoration:none;">contacto@moneyloaney.com</a></p>
      <div style="margin-top:10px;">
        <a href="https://instagram.com" target="_blank" aria-label="Instagram" style="margin:0 10px; color:#00ff44; font-size:1.5rem;">üì∑</a>
        <a href="https://t.me" target="_blank" aria-label="Telegram" style="margin:0 10px; color:#00ff44; font-size:1.5rem;">üí¨</a>
        <a href="https://twitter.com" target="_blank" aria-label="Twitter" style="margin:0 10px; color:#00ff44; font-size:1.5rem;">üê¶</a>
      </div>
    </div>

  </div>

  <hr style="margin: 40px auto; width: 80%; border: 1px solid #022;">

  <p style="font-size: 0.75rem; color: #66ff66; user-select:none;">
    ¬© 2025 Money Loaney. Todos los derechos reservados. <br>
    <small style="font-size:0.65rem; color:#337733; user-select:none;">
      Plataforma comparadora de pr√©stamos digitales y asesor√≠a personalizada. No somos entidad financiera.
    </small>
  </p>

  <!-- Animaci√≥n bolsa dinero -->
  <div id="moneyBagsContainer" style="position: fixed; bottom: 0; left: 0; width: 100%; height: 100px; pointer-events: none; overflow: visible; z-index: 5000;"></div>
</footer>

<style>
  /* Animaci√≥n neon parpadeante slogan */
  @keyframes neonGlow {
    0%, 100% { text-shadow: 0 0 5px #33ff77, 0 0 20px #00ff44, 0 0 30px #33ff77, 0 0 40px #00ff44; }
    50% { text-shadow: 0 0 2px #22cc55, 0 0 10px #00cc33, 0 0 15px #22cc55, 0 0 20px #00cc33; }
  }
  #footerLogo {
    animation: neonGlow 3s ease-in-out infinite;
  }
  #footerSlogan {
    animation: neonGlow 4s ease-in-out infinite alternate;
  }
</style>

<script>
  // Animaci√≥n emojis bolsa dinero cayendo - efecto sutil

  const container = document.getElementById('moneyBagsContainer');

  function createMoneyBag() {
    const bag = document.createElement('div');
    bag.textContent = 'üí∞';
    bag.style.position = 'absolute';
    bag.style.fontSize = `${Math.random() * 30 + 20}px`;
    bag.style.left = `${Math.random() * 100}%`;
    bag.style.top = '-40px';
    bag.style.opacity = 0.7;
    bag.style.transition = 'transform 10s linear, opacity 10s linear';
    container.appendChild(bag);

    // Force reflow to enable transition
    void bag.offsetWidth;

    bag.style.transform = `translateY(120vh) rotate(${Math.random() * 360}deg)`;
    bag.style.opacity = 0;

    // Remove after animation
    setTimeout(() => {
      bag.remove();
    }, 10000);
  }

  // Crear entre 1 y 2 bolsas cada 3 segundos m√°ximo
  setInterval(() => {
    if (container.childElementCount < 5) {
      createMoneyBag();
    }
  }, 1500);

  // Smooth scroll para enlaces internos
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const targetID = this.getAttribute('href').substring(1);
      const targetEl = document.getElementById(targetID);
      if (targetEl) {
        targetEl.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });
</script>

<!-- PAGINAS LEGALES: EJEMPLOS B√ÅSICOS -->

<!-- aviso-legal.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Aviso Legal - Money Loaney</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background: #000; color: #b3ffb3; font-family: 'Arial', sans-serif; padding: 40px; line-height: 1.6; }
    h1,h2 { color: #00ff44; text-shadow: 0 0 8px #00ff44; }
    a { color: #33ff77; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Aviso Legal</h1>
  <p>Money Loaney es una plataforma digital que conecta usuarios con prestamistas externos para solicitar pr√©stamos. No somos entidad financiera.</p>
  <h2>Responsabilidad</h2>
  <p>No garantizamos la aprobaci√≥n ni condiciones de los pr√©stamos ofrecidos por terceros.</p>
  <h2>Contacto</h2>
  <p>Para consultas o reclamaciones, escr√≠benos a <a href="mailto:contacto@moneyloaney.com">contacto@moneyloaney.com</a>.</p>
</body>
</html>

<!-- politica-privacidad.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Pol√≠tica de Privacidad - Money Loaney</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { background: #000; color: #b3ffb3; font-family: 'Arial', sans-serif; padding: 40px; line-height: 1.6; }
    h1,h2 { color: #00ff44; text-shadow: 0 0 8px #00ff44; }
    a { color: #33ff77; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Pol√≠tica de Privacidad</h1>
  <p>Respetamos tu privacidad y tratamos tus datos seg√∫n RGPD.</p>
  <h2>Datos recogidos</h2>
  <p>Los datos introducidos en formularios se usan solo para el proceso de solicitud y conexi√≥n con prestamistas.</p>
  <h2>Derechos</h2>
  <p>Puedes solicitar acceso, rectificaci√≥n y eliminaci√≥n enviando email a <a href="mailto:contacto@moneyloaney.com">contacto@moneyloaney.com</a>.</p>
</body>
</html>

<!-- cookies.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Pol√≠tica de Cookies - Money Loaney</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { background: #000; color: #b3ffb3; font-family: 'Arial', sans-serif; padding: 40px; line-height: 1.6; }
    h1,h2 { color: #00ff44; text-shadow: 0 0 8px #00ff44; }
    a { color: #33ff77; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Pol√≠tica de Cookies</h1>
  <p>Este sitio usa cookies para mejorar la experiencia y anal√≠ticas.</p>
  <h2>Cookies propias y de terceros</h2>
  <p>Al navegar aceptas el uso de cookies.</p>
</body>
</html>

<!-- terminos.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>T√©rminos y Condiciones - Money Loaney</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { background: #000; color: #b3ffb3; font-family: 'Arial', sans-serif; padding: 40px; line-height: 1.6; }
    h1,h2 { color: #00ff44; text-shadow: 0 0 8px #00ff44; }
    a { color: #33ff77; text-decoration: underline; }
  </style>
</head>
<body>
  <h1>T√©rminos y Condiciones</h1>
  <p>El uso de Money Loaney implica la aceptaci√≥n de estos t√©rminos y condiciones.</p>
  <h2>Suscripci√≥n</h2>
  <p>El usuario acepta una suscripci√≥n autom√°tica de 9,99‚Ç¨ cada 15 d√≠as que puede cancelar en cualquier momento.</p>
  <h2>Limitaci√≥n de responsabilidad</h2>
  <p>Money Loaney no se responsabiliza por decisiones de terceros.</p>
</body>
</html>
<!-- PARTE 6: Chatbot IA para atenci√≥n en Money Loaney -->
<style>
  /* Contenedor del chatbot */
  #chatbot {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 320px;
    max-height: 480px;
    background: #022002;
    border-radius: 15px;
    box-shadow: 0 0 20px #00ff44;
    font-family: 'Orbitron', sans-serif;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 99999;
    transform: translateY(420px);
    transition: transform 0.3s ease;
  }
  #chatbot.open {
    transform: translateY(0);
  }
  /* Header del chatbot */
  #chatbot-header {
    background: linear-gradient(45deg, #00ff44, #33ff77);
    padding: 15px;
    color: #0a0f0c;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    user-select: none;
  }
  /* √Årea mensajes */
  #chatbot-messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    color: #aaffaa;
    background: #011100;
  }
  /* Mensajes del usuario */
  .chatbot-message.user {
    text-align: right;
  }
  .chatbot-message.user span {
    background: #33ff77;
    color: #0a0f0c;
    display: inline-block;
    padding: 8px 14px;
    margin: 6px 0;
    border-radius: 18px 18px 0 18px;
    max-width: 75%;
    word-wrap: break-word;
  }
  /* Mensajes del bot */
  .chatbot-message.bot span {
    background: #004400;
    color: #aaffaa;
    display: inline-block;
    padding: 8px 14px;
    margin: 6px 0;
    border-radius: 18px 18px 18px 0;
    max-width: 75%;
    word-wrap: break-word;
  }
  /* Input y bot√≥n */
  #chatbot-input-area {
    display: flex;
    border-top: 1px solid #00ff44;
    padding: 10px 15px;
    background: #011100;
  }
  #chatbot-input {
    flex: 1;
    padding: 10px 12px;
    border-radius: 20px;
    border: none;
    font-size: 1rem;
    background: #022002;
    color: #b3ffb3;
    outline: none;
  }
  #chatbot-send-btn {
    background: #00ff44;
    border: none;
    margin-left: 10px;
    padding: 10px 18px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 700;
    color: #0a0f0c;
    transition: background 0.3s ease;
  }
  #chatbot-send-btn:hover {
    background: #33ff77;
  }
  /* Bot√≥n flotante abrir/cerrar chatbot */
  #chatbot-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #00ff44;
    border-radius: 50%;
    width: 56px;
    height: 56px;
    box-shadow: 0 0 15px #00ff44;
    font-size: 30px;
    color: #0a0f0c;
    border: none;
    cursor: pointer;
    z-index: 100000;
    user-select: none;
  }
</style>

<!-- Bot√≥n abrir chatbot -->
<button id="chatbot-toggle" aria-label="Abrir chat de ayuda">üí¨</button>

<!-- Contenedor chatbot -->
<div id="chatbot" role="dialog" aria-live="polite" aria-label="Chat de ayuda Money Loaney">
  <div id="chatbot-header" tabindex="0" aria-controls="chatbot-messages" aria-expanded="true">
    Asistente Money Loaney
  </div>
  <div id="chatbot-messages" aria-live="polite" aria-atomic="false" role="log" tabindex="0"></div>
  <form id="chatbot-form" autocomplete="off">
    <div id="chatbot-input-area">
      <input type="text" id="chatbot-input" placeholder="Escribe tu pregunta aqu√≠..." aria-label="Campo para escribir pregunta" required minlength="2" />
      <button type="submit" id="chatbot-send-btn" aria-label="Enviar mensaje">Enviar</button>
    </div>
  </form>
</div>

<script>
  const chatbot = document.getElementById('chatbot');
  const toggleBtn = document.getElementById('chatbot-toggle');
  const messagesContainer = document.getElementById('chatbot-messages');
  const chatbotForm = document.getElementById('chatbot-form');
  const chatbotInput = document.getElementById('chatbot-input');

  // Alternar visibilidad chatbot
  toggleBtn.addEventListener('click', () => {
    chatbot.classList.toggle('open');
    // Si est√° abierto, oculta bot√≥n y pone foco en input
    if (chatbot.classList.contains('open')) {
      toggleBtn.style.display = 'none';
      chatbotInput.focus();
      scrollMessagesToBottom();
    } else {
      toggleBtn.style.display = 'block';
    }
  });

  // Cerrar chatbot si pulsas Escape en input o header
  chatbot.addEventListener('keydown', e => {
    if(e.key === 'Escape') {
      chatbot.classList.remove('open');
      toggleBtn.style.display = 'block';
      toggleBtn.focus();
    }
  });

  // A√±ade mensaje al chat
  function addMessage(text, sender) {
    const div = document.createElement('div');
    div.classList.add('chatbot-message', sender);
    div.innerHTML = `<span>${text}</span>`;
    messagesContainer.appendChild(div);
    scrollMessagesToBottom();
  }

  // Scroll al final mensajes
  function scrollMessagesToBottom() {
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  // Respuestas predefinidas b√°sicas
  const respuestas = {
    saludo: [
      "¬°Hola! Soy tu asistente Money Loaney. ¬øEn qu√© puedo ayudarte hoy?",
      "¬°Bienvenido a Money Loaney! ¬øTienes dudas sobre nuestros pr√©stamos o c√≥mo funciona la comparadora?"
    ],
    como_funciona: "Puedes completar el formulario con tus datos, seleccionar el importe y plazo, y nuestro sistema te conecta con los mejores prestamistas. En minutos tendr√°s respuesta.",
    requisitos: "Solo necesitas tu DNI/NIE, una cuenta bancaria y una tarjeta para la suscripci√≥n autom√°tica. La suscripci√≥n es 9,99‚Ç¨ cada 15 d√≠as y puedes cancelarla cuando quieras.",
    suscripcion: "La suscripci√≥n de 9,99‚Ç¨ cada 15 d√≠as permite acceso a asesor√≠a personalizada y mejores condiciones. Se cobra autom√°ticamente, pero puedes cancelar en cualquier momento enviando un email a contacto@moneyloaney.com.",
    prestamistas: "Trabajamos con prestamistas confiables como MoneyMan, Vivus, Cashper, y m√°s, para ofrecerte la mejor opci√≥n seg√∫n tu perfil.",
    contacto: "Puedes contactarnos en contacto@moneyloaney.com para cualquier consulta o soporte adicional.",
    no_entendido: "Lo siento, no entend√≠ tu pregunta. ¬øPodr√≠as reformularla o preguntarme sobre pr√©stamos, suscripci√≥n, requisitos, o prestamistas?"
  };

  // Funci√≥n simple para detectar tema de pregunta
  function detectarTema(mensaje) {
    mensaje = mensaje.toLowerCase();
    if (/(hola|buenas|saludos)/.test(mensaje)) return "saludo";
    if (/(c√≥mo funciona|funciona|c√≥mo puedo|qu√© es)/.test(mensaje)) return "como_funciona";
    if (/(requisitos|documentos|qu√© necesito|necesito)/.test(mensaje)) return "requisitos";
    if (/(suscripci√≥n|pago|cu√°nto cuesta|precio|tarifa)/.test(mensaje)) return "suscripcion";
    if (/(prestamista|prestamistas|qui√©nes|trabajan)/.test(mensaje)) return "prestamistas";
    if (/(contacto|email|correo|soporte)/.test(mensaje)) return "contacto";
    return "no_entendido";
  }

  // Simula respuesta IA (aqu√≠ podr√≠as conectar con API real)
  async function responder(mensajeUsuario) {
    const tema = detectarTema(mensajeUsuario);
    const posiblesRespuestas = respuestas[tema];
    if (Array.isArray(posiblesRespuestas)) {
      // Escoge una aleatoria para saludos
      return posiblesRespuestas[Math.floor(Math.random() * posiblesRespuestas.length)];
    }
    return posiblesRespuestas || respuestas.no_entendido;
  }

  // Manejar env√≠o formulario chat
  chatbotForm.addEventListener('submit', async e => {
    e.preventDefault();
    const textoUsuario = chatbotInput.value.trim();
    if (!textoUsuario) return;

    addMessage(textoUsuario, 'user');
    chatbotInput.value = '';
    addMessage('...', 'bot');

    // Espera respuesta simulada
    const respuesta = await responder(textoUsuario);

    // Quitar '...' y a√±adir respuesta real
    const mensajesBot = document.querySelectorAll('.chatbot-message.bot');
    if (mensajesBot.length) {
      mensajesBot[mensajesBot.length - 1].querySelector('span').textContent = respuesta;
    }

    scrollMessagesToBottom();
  });

  // Al cargar mostrar saludo inicial
  window.addEventListener('load', () => {
    setTimeout(() => addMessage(respuestas.saludo[0], 'bot'), 1000);
  });
</script>
